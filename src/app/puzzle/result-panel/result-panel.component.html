<svg>
  <rect width=700 height=700 x=20 y=20 fill=white></rect>
<!-- ~~~~~~~!!!!~~~~~~~~~~~~~~~~~~~~TEXT~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <text class="info-text" x=70 y=70>Congratulations!!!</text>
  <text [class.noshow] = "puzzleStatsService.time > puzzleStatsService.puzzleData.best"
    class="info-text" x=70 y=110>You have set the best time for this puzzle!!!</text>
  <text [class.noshow] = "puzzleStatsService.time <= puzzleStatsService.puzzleData.best"
    class="info-text" x=70 y=110>You have solved this puzzle.</text>
  <text class="info-text" x=70 y=150>Your time is: {{puzzleStatsService.time | puzzletime:true}}</text>
  <text class="info-text" x=70 y=190>You have received a {{puzzleStatsService.medal}} medal</text>
  <text class="info-text" x=70 y=230>Your score for this puzzle is: {{puzzleStatsService.score}} points.</text>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~STAGE~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <g *ngIf="{length: times.length, dx:500/times.length, dy:150/times.length} as data"
    transform="translate(100,370)">
    <g *ngFor="let time of times; let i=index">
      <path class="stage"
        attr.d="M{{data.dx*i}} {{data.dy*(data.length-i)}}
        L{{data.dx*i}} {{data.dy*(data.length-i-1)}}
        L{{data.dx*(i+1)}} {{data.dy*(data.length-i-1)}}"></path>
      <text class="time-text" attr.x="{{data.dx*i}}" y=180>{{time.time | puzzletime:false}}</text>
<!-- ~~~~~~~~~~~~~~~~~~~~~STICKFIGURE ON STAGE~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <path *ngIf="puzzleStatsService.medal === time.medal" class="stickfigure"
        d="M-20 0 L0 -40 L20 0 M0 -40 L0 -70 M-20 -70 L0 -45 L20 -70 M0 -70  A15 15 0 1 0 0 -100 A15 15 0 1 0 0 -70"
        attr.transform="translate({{data.dx*(i+0.5)}},{{data.dy*(data.length-i-1)}})"></path>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~MEDALTEXT~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <text class="medal-text" attr.x="{{data.dx*(i+0.5)}}" attr.y="{{data.dy*(data.length - i - 0.5)}}">{{time.medal}}</text>
    </g>
    <path class="stage" d="M0 150 L500 150 L500 0"></path>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~STICKFIGURE OFF STAGE~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <path *ngIf="puzzleStatsService.medal === 'wood'" class="stickfigure"
      d="M-20 0 L0 -40 L20 0 M0 -40 L0 -70 M-20 -40 L0 -65 L20 -40 M0 -70  A15 15 0 1 0 0 -100 A15 15 0 1 0 0 -70"
      transform="translate(-40,150)"></path>
    <text class="time-text" attr.x="{{data.dx*data.length}}" y=180>{{puzzleStatsService.best | puzzletime:false}}</text>
  </g>
  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~BUTTONS~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <g *ngFor="let button of buttons">
    <rect class="click-area" attr.fill="{{color}}" attr.opacity="{{button.active ? 1 : 0.5}}" attr.width="{{button.width}}"
      attr.height="{{button.height}}" attr.x="{{horizontal ? button.xh : button.xv}}" attr.y="{{horizontal ? button.yh : button.yv}}" (click)="buttonClicked(button.text, button.active)"></rect>
    <text class="button-text"
      attr.x="{{(horizontal ? button.xh : button.xv) + button.width/2}}"
      attr.y="{{(horizontal ? button.yh : button.yv) + button.height/2}}">{{button.text}}</text>
  </g>
</svg>
